{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ValidateOrder=_ref=>{let{items,totalPrice,onEmptyCart}=_ref;const[deliveryInfo,setDeliveryInfo]=useState({name:'',surname:'',city:'',neighborhood:'',phone:''});const[message,setMessage]=useState('');const[isSubmitting,setIsSubmitting]=useState(false);const handleInputChange=e=>{const{name,value}=e.target;setDeliveryInfo({...deliveryInfo,[name]:value});};const handleOrderSubmit=async()=>{setIsSubmitting(true);setMessage('Envoi de la commande...');try{const orderResponse=await fetch('http://localhost:5000/api/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({items,deliveryInfo,totalPrice})});if(orderResponse.ok){const orderData=await orderResponse.json();console.log('Réponse du backend pour les commandes:',orderData);setMessage('Commande validée avec succès!');onEmptyCart();}else{setMessage('Erreur lors de la validation de la commande');}}catch(error){console.error('Erreur lors de la communication avec le serveur:',error);setMessage('Impossible de se connecter au serveur');}setIsSubmitting(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Valider la commande\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",placeholder:\"Nom\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{name:\"surname\",placeholder:\"Pr\\xE9nom\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{name:\"city\",placeholder:\"Ville\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{name:\"neighborhood\",placeholder:\"Quartier\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",placeholder:\"T\\xE9l\\xE9phone\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleOrderSubmit,disabled:isSubmitting,children:\"Valider\"}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]});};export default ValidateOrder;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ValidateOrder","_ref","items","totalPrice","onEmptyCart","deliveryInfo","setDeliveryInfo","name","surname","city","neighborhood","phone","message","setMessage","isSubmitting","setIsSubmitting","handleInputChange","e","value","target","handleOrderSubmit","orderResponse","fetch","method","headers","body","JSON","stringify","ok","orderData","json","console","log","error","children","placeholder","onChange","onClick","disabled"],"sources":["/home/fathane/link_repository/frontend/src/components/ValidateOrder.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst ValidateOrder = ({ items, totalPrice, onEmptyCart }) => {\n  const [deliveryInfo, setDeliveryInfo] = useState({\n    name: '',\n    surname: '',\n    city: '',\n    neighborhood: '',\n    phone: '',\n  });\n  const [message, setMessage] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setDeliveryInfo({ ...deliveryInfo, [name]: value });\n  };\n\n  const handleOrderSubmit = async () => {\n    setIsSubmitting(true);\n    setMessage('Envoi de la commande...');\n  \n    try {\n      const orderResponse = await fetch('http://localhost:5000/api/orders', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ items, deliveryInfo, totalPrice }),\n      });\n  \n      if (orderResponse.ok) {\n        const orderData = await orderResponse.json();\n        console.log('Réponse du backend pour les commandes:', orderData);\n        setMessage('Commande validée avec succès!');\n        onEmptyCart();\n      } else {\n        setMessage('Erreur lors de la validation de la commande');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la communication avec le serveur:', error);\n      setMessage('Impossible de se connecter au serveur');\n    }\n  \n    setIsSubmitting(false);\n  };\n\n  return (\n    <div>\n      <h2>Valider la commande</h2>\n      <input name=\"name\" placeholder=\"Nom\" onChange={handleInputChange} />\n      <input name=\"surname\" placeholder=\"Prénom\" onChange={handleInputChange} />\n      <input name=\"city\" placeholder=\"Ville\" onChange={handleInputChange} />\n      <input name=\"neighborhood\" placeholder=\"Quartier\" onChange={handleInputChange} />\n      <input name=\"phone\" placeholder=\"Téléphone\" onChange={handleInputChange} />\n      <button onClick={handleOrderSubmit} disabled={isSubmitting}>Valider</button>\n      {message && <p>{message}</p>}\n    </div>\n  );\n};\n\nexport default ValidateOrder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}